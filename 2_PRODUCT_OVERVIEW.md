# 2. Огляд продукту

Український книжковий ринок демонструє ознаки відновлення та зростання, особливо в сегменті електронної комерції, що робить запуск цифрового сервісу перспективним.

## 2.1 Позиціонування продукту

"Плай" — це новий, самостійний онлайн-сервіс, орієнтований на український ринок. Він створюється як новий продукт, а не заміна існуючої системи, і є частиною ширшої екосистеми електронної комерції.

Продукт складається з трьох основних компонентів: клієнтський UI, бекенд-API та інтерфейс адміністрування.

Система матиме ключові залежності від зовнішніх сервісів, з якими вона інтегрується через API, але не розробляє їх з нуля (як зазначено в Розділі 1.2):

1. Платіжні шлюзи: (наприклад, LiqPay, Stripe, WayForPay) для обробки онлайн-платежів.

2. Логістичні оператори: (наприклад, Нова Пошта, Укрпошта) для розрахунку вартості, оформлення та відстеження доставки друкованих книг.

## 2.2 Функціональні вимоги до продукту

Прочитайте про функції продукту в [функціональних вимогах](https://github.com/iamvladshevchuk/singularitarians/blob/main/4_FUNCTIONAL_REQUIREMENTS.md) цього документу.

## 2.3 Обмеження продукту

* Система повинна використовувати сторонні, сертифіковані платіжні шлюзи для всіх фінансових транзакцій. Розробка власного платіжного сервісу з нуля виключена.
* Система не повинна займатися фізичною логістикою (складування, пакування, відправка). Її відповідальність обмежується генерацією замовлення та обміном даними з логістичним партнером.
* Система повинна відповідати вимогам Закону України "Про захист персональних даних" при обробці та зберіганні інформації користувачів.
* Бекенд-API повинен бути розроблений з урахуванням можливості підключення майбутніх клієнтських застосунків (наприклад, мобільних додатків).

## 2.4 Характеристики користувачів

Прочитайте про користувачів в категорії "[Персони](https://github.com/iamvladshevchuk/singularitarians/blob/main/6_PERSONAS.md)" цього документу.

## 2.5 Припущення та залежності

Припущення:

* Припускається, що користувачі мають стабільний доступ до Інтернету та використовують сучасні веб-браузери.
* Припускається, що видавці та постачальники надаватимуть метадані та файли книг у форматах, придатних для імпорту в систему.

Залежності:

* Критична залежність від стабільності та доступності API сторонніх платіжних систем. Збій у їхній роботі безпосередньо блокує основну функцію продукту (оплату).
* Критична залежність від API логістичних операторів. Збій унеможливить розрахунок вартості доставки та оформлення відправлень.
* Залежність від своєчасного оновлення каталогів від видавництв для підтримки актуальності пропозицій.

## 2.6 Розподіл вимог серед компонентів

Вимоги, описані в цьому SRS, будуть розподілені між трьома основними компонентами, визначеними в Розділі 1.2:

* Клієнтський UI (Веб): Реалізує всі функціональні вимоги, пов'язані з взаємодією кінцевого користувача (пошук, кошик, особистий кабінет, UI платіжної форми).
* Бекенд (API): Реалізує всю бізнес-логіку, керування даними, безпеку та інтеграцію з зовнішніми сервісами (платежі, логістика).
* Система адміністрування: Реалізує вимоги до керування каталогом, замовленнями та користувачами.

## 2.7 Ключові сценарії використання

Для основних [Персон](https://github.com/iamvladshevchuk/singularitarians/blob/main/6_PERSONAS.md) вказуємо такі основні сценарії використання:

### Сценарії Клієнта:

#### UC-01: Пошук та перегляд книги.

```mermaid
sequenceDiagram
    title UC-01: Пошук та перегляд книги
    actor Клієнт
    participant Веб_UI as Веб UI (клієнт)
    participant API as Бекенд API
    participant IDX as Пошуковий індекс/БД

    Клієнт->>Веб_UI: Відкрити каталог / ввести запит у пошук
    Веб_UI->>API: GET /search?q=...&filters=...
    API->>IDX: Пошук за індексом/БД
    IDX-->>API: Результати (книги, підсвітка, пагінація)
    API-->>Веб_UI: Результати пошуку
    Веб_UI-->>Клієнт: Показати список + фільтри/сортування

    alt Клієнт застосовує фільтри
        Клієнт->>Веб_UI: Обрати жанр/автора/ціновий діапазон
        Веб_UI->>API: GET /search?filters=оновлені
        API->>IDX: Перерахунок результатів
        IDX-->>API: Відібрані результати
        API-->>Веб_UI: Оновлений список
        Веб_UI-->>Клієнт: Показати оновлений список
    end

    Клієнт->>Веб_UI: Відкрити сторінку книги
    Веб_UI->>API: GET /books/{id}
    API->>IDX: Отримати метадані/наявність/відгуки
    IDX-->>API: Дані книги
    API-->>Веб_UI: Деталі книги
    Веб_UI-->>Клієнт: Показати опис, ціни, формати

    opt Немає збігів
        API-->>Веб_UI: 0 результатів + рекомендації
        Веб_UI-->>Клієнт: Показати поради щодо запиту
    end
```

#### UC-02: Оформлення замовлення (Checkout).

* Мета: Придбати книги, що знаходяться у кошику.
* Опис: Це комплексний сценарій, що включає:
  * Клієнт переходить до кошика та ініціює оформлення.
  * Вводить контактну інформацію та адресу доставки.
  * Система (через Бекенд API) звертається до API логістичного оператора (залежність 2.5) для розрахунку вартості та варіантів доставки.
  * Клієнт обирає бажаний спосіб доставки та оплати.
  * Система (через Бекенд API) перенаправляє клієнта на захищений інтерфейс платіжного шлюзу (залежність 2.5, обмеження 2.3) для введення платіжних даних.
  * Після успішної оплати шлюз інформує бекенд, і система підтверджує замовлення клієнту.

#### UC-03: Перегляд особистого кабінету.

* Мета: Переглянути історію своїх замовлень та керувати особистими даними.
* Опис: Автентифікований клієнт входить до свого профілю, де бачить список минулих замовлень, їхні статуси (наприклад, "Обробляється", "Відправлено") та може редагувати свою контактну інформацію.

### Сценарії Адміністратора:

#### UC-04: Керування каталогом.

* Мета: Підтримувати актуальність асортименту книг.
* Опис: Адміністратор входить до системи адміністрування, додає нові позиції книг, редагує існуючі (ціни, описи, обкладинки) або деактивує книги, яких немає в наявності.

#### UC-05: Обробка замовлень.

* Мета: Виконати замовлення, отримане від клієнта.
* Опис: Адміністратор переглядає список нових, оплачених замовлень. Він змінює статус замовлення (наприклад, на "Комплектується") та через інтеграцію з API логістичного оператора генерує транспортну накладну для відправки (відповідно до обмеження 2.3).

```mermaid
usecase "Сервіс 'Плай'" {
    actor "Клієнт" as client
    actor "Адміністратор" as admin

    rectangle "Система 'Плай'" {
        usecase "UC-01: Пошук та перегляд" as UC01
        usecase "UC-02: Оформлення замовлення" as UC02
        usecase "UC-03: Особистий кабінет" as UC03
        usecase "UC-04: Керування каталогом" as UC04
        usecase "UC-05: Обробка замовлень" as UC05
    }

    client -- (UC01)
    client -- (UC02)
    client -- (UC03)

    admin -- (UC04)
    admin -- (UC05)

    actor "Платіжний шлюз" as gateway
    actor "Логістичний оператор" as logistics

    (UC02) ..> gateway : <<Використовує>>
    (UC02) ..> logistics : <<Використовує>>
    (UC05) ..> logistics : <<Використовує>>
}
```
